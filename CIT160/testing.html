<!DOCTYPE HTML>
<html lang="en-us"> 
<head>
<meta charset="utf-8">
<meta name="author" content ="Brett Underwood">
<title>Loan</title>

<script>
/*Defining Table
 *Input: User input
    1. Amount borrowed (principal)
    2. Annual interest rate (example: 0.05)
    3. Number of years
    4. Payments per year
    5. Number of payments paid to date

 *Processing: 
    function doPayment() {}
    1. call function computePayment();
    2. store value returned by computePayment() in variable 'output1'
    3. display 'output1' to user in div1

    function computePayment(principal, annualRate, numberYears, paymentsPerYear) {}
    1. compute payment using: p= ar / 1 - (1 + r) ** -n
    2. return payment in $ in variable 'output1'

    function doBalance() {}
    1. call function computeBalane();
    2. store value returned by computeBalance() in variable 'output2'
    3. display 'output2' to user in div2

    function computeBalance(principal, annualRate, numberYears, paymentsPerYear, paymentsToDate) {}
    1. compute balance using: b= a(1 + r) ** d - (p((1 + r) ** d) - 1) / r)
    2. return balance in $ in variable 'output2'

 *Output: 
    1. display payment in $
    2. display balance in $
 */

function doPayment() {
    let principal = parseFloat(document.getElementById('principal').value);
    let annualRate = parseFloat(document.getElementById('rate').value);
    let numberYears = parseFloat(document.getElementById('years').value);
    let paymentsPerYear = parseFloat(document.getElementById('paymentsPerYear').value);

    output1 = computePayment(principal, annualRate, numberYears, paymentsPerYear);

    document.getElementById('outputDIV1').innerHTML = output1;
 }

function computePayment(principal, annualRate, numberYears, paymentsPerYear) {
    let output1 = '';
    let answerPayment = 0;
    answerPayment = (principal * (annualRate/paymentsPerYear)) / 
    ((1) - (1 + annualRate / paymentsPerYear) ** -(paymentsPerYear * numberYears));

    output1 = "$" + answerPayment.toFixed(2) + " ";
    return output1;
}

function doBalance() {
    let principal = parseFloat(document.getElementById('principal').value);
    let annualRate = parseFloat(document.getElementById('rate').value);
    let numberYears = parseFloat(document.getElementById('years').value);
    let paymentsPerYear = parseFloat(document.getElementById('paymentsPerYear').value);
    let paymentsToDate = parseFloat(document.getElementById('paymentsToDate').value);

    output2 = computeBalance(principal, annualRate, numberYears, paymentsPerYear, paymentsToDate);

    document.getElementById('outputDIV2').innerHTML = output2;
 }
 
function computeBalance(principal, annualRate, numberYears, paymentsPerYear, paymentsToDate) {
    let output2 = '';
    let answerBalance = 0;
    let monthlyPayment = (principal * (annualRate/paymentsPerYear)) / 
    ((1) - (1 + annualRate / paymentsPerYear) ** -(paymentsPerYear * numberYears));

    answerBalance = (principal * (1 + (annualRate / paymentsPerYear)) ** (paymentsToDate) -
    ((monthlyPayment.toFixed(2)) * ((1 + (annualRate / paymentsPerYear)) ** (paymentsToDate) - 1) / 
    (annualRate / paymentsPerYear)));
    output2 = "$" + answerBalance.toFixed(2);
    return output2;
}

</script>
</head>

<body>
Please Enter Amount Borrowed (principal) <input type="text" id="principal" size="3"></sup><br> 
Please Enter Annual Interest Rate (example: .065) <input type="text" id="rate" size="3"><br>
Please Enter Number of Years <input type="text" id="years" size="3"><br>
Please Enter Payments per Year <input type="text" id="paymentsPerYear" size="3"><br>
<button type="button" onclick="doPayment()">Compute payment</button>
<div id="outputDIV1"></div>

Please Enter Number of Payments Paid to Date <input type="text" id="paymentsToDate" size="3"><br>
<button type="button" onclick="doBalance()">Compute payoff amount</button>
<div id="outputDIV2"></div>

</body>
</html>